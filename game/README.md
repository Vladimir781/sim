# Colony Simulation Prototype

Браузерный прототип 2D колони-симуляции с автономными агентами и панелью управления.

## Как запустить

1. Скачайте репозиторий или архив.
2. Откройте файл `index.html` в корне проекта двойным кликом (современный Chrome/Firefox/Safari).
3. После появления сцены нажмите кнопку ⚙️, чтобы открыть панель, и на вкладке «Обзор» нажмите «Старт».

Проект работает напрямую по `file://`, без локального сервера и сети.

## Особенности

- Симуляция и ИИ работают в WebWorker (с фолбэком на выполнение в основном потоке).
- Каждый агент использует собственную малую нейросеть (Tiny-MLP) и может переключаться на FSM режим.
- Панель управления охватывает обзор, агентов, мир, коммуникации, события, сейвы, настройки и справку.
- Карта, конфиги, спрайты и эмодзи загружаются как ES-модули с data-URI — без `fetch` к локальным файлам.
- Сейвы хранятся в IndexedDB; лёгкие настройки — в LocalStorage.

## Сборка

Проект написан на TypeScript. Для генерации модулей выполните:

```bash
npm install
npm run build
```

Выходные файлы размещаются в `game/dist/` и подключаются напрямую из `index.html`.

## Работа с ассетами

Бинарные ассеты конвертированы в текстовые модули:

- `game/assets/spritesheet.b64.js` — base64 строка спрайтов.
- `game/assets/emoji_bitmap.b64.js` — base64 строка эмодзи.

Для повторной конвертации используйте утилиту `tools/asset2b64.ts`:

```bash
npx ts-node tools/asset2b64.ts path/to/image.png game/assets/my_texture.b64.js --export MY_TEXTURE_B64 --mime image/png
```

Скрипт читает файл, кодирует содержимое в base64, подставляет data-URI и генерирует модуль ES с именованным экспортом.
